<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./style.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
      const proxyurl = "https://cors-crush.herokuapp.com/";
      function getStorage(url) {
        $.ajax({
          async: true,
          type: "GET",
          url: proxyurl + url,
          headers: {
            "Content-Type": "application/json",
            "access-token": "23c0601fb7704e30836cea931e266b26",
          },
          success: function (json) {
            for (let obj of json.storage) {
              if (obj.key == "first_name_1") {
                var first_name = obj.value;
              }
              if (obj.key == "last_name_1") {
                var last_name = obj.value;
              }
              if (obj.key == "insurance_type_1") {
                var insurance_type = obj.value;
              }
              if (obj.key == "email") {
                var email = obj.value;
              }
              if (obj.key == "account_number_1") {
                var account_number = obj.value;
              }
              if (obj.key == "drivers_license") {
                var drivers_license = obj.value;
              }
              if (obj.key == "custom_city_1") {
                var city = obj.value;
              }
              if (obj.key == "custom_state_1") {
                var state = obj.value;
              }
              if (obj.key == "zip_code") {
                var zip_code = obj.value;
              }
              if (obj.key == "custom_country_1") {
                var country = obj.value;
              }
              if (obj.key == "phone") {
                var phone = obj.value;
              }
              if (obj.key == "datetime") {
                var datetime = obj.value;
              }
              if (obj.key == "car_make_1") {
                var car_make = obj.value;
              }
              if (obj.key == "car_model_1") {
                var car_model = obj.value;
              }
              if (obj.key == "accident_details_1") {
                var accident_details = JSON.parse(obj.value).join(". ");
                console.log(accident_details);
              }
              // if (debug.includes(obj.key)) {
              //   html += "<div>" + obj.key + ": " + obj.value + "</div>";
              // }
            }
            // $("#form-data").html("<p>" + html + "</p>");
            // console.log(html);
            $("#first-name").attr("value", first_name);
            $("#last-name").attr("value", last_name);
            $("#insurance-type").val(insurance_type);
            $("#email").attr("value", email);
            $("#account-number").attr("value", account_number);
            $("#drivers-license").attr("value", drivers_license);
            $("#city").attr("value", city);
            $("#state").attr("value", state);
            $("#zip-code").attr("value", zip_code);
            $("#country").attr("value", country);
            $("#phone").attr("value", phone);
            $("#datetime").attr("value", datetime);
            $("#car-make").attr("value", car_make);
            $("#car-model").attr("value", car_model);
            $("#accident-details").html(accident_details);
          },
        });
      }
    </script>
    <title>Form Agent</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />

    <link
      rel="stylesheet"
      media="all"
      href="/assets/salesforce-64e71c142e7a52148a60970f77c4ecf30d99c84d7197c5a942398618ff64bf6a.css"
    />
  </head>
  <body>
    <div class="container">
      <div id="form-data"></div>
      <form class="needs-validation" novalidate>
        <div class="agent-prompt center"></div>
        <hr />
        <div class="form-row">
          <div class="col-md-4 mb-3">
            <label for="first-name">First name</label>
            <input type="text" class="form-control" id="first-name" />
          </div>
          <div class="col-md-4 mb-3">
            <label for="last-name">Last name</label>
            <input type="text" class="form-control" id="last-name" />
          </div>
          <div class="col-md-4 mb-3">
            <label for="insurance-type">Insurance type</label>
            <select id="insurance-type" class="form-control">
              <option value=""></option>
              <option>Home Insurance</option>
              <option>Auto Insurance</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label for="email">Email</label>
            <input type="text" class="form-control" id="email" />
          </div>
          <div class="col-md-3 mb-3">
            <label for="account-number">Account number</label>
            <input type="text" class="form-control" id="account-number" />
          </div>
          <div class="col-md-3 mb-3">
            <label for="drivers-license">Driver's license</label>
            <input type="text" class="form-control" id="drivers-license" />
          </div>
        </div>
        <hr />
        <div class="form-row">
          <div class="col-md-4 mb-3">
            <label for="city">City</label>
            <input type="text" class="form-control" id="city" />
          </div>
          <div class="col-md-4 mb-3">
            <label for="state">State</label>
            <input type="text" class="form-control" id="state" />
          </div>
          <div class="col-md-4 mb-3">
            <label for="zip-code">Zip code</label>
            <input type="text" class="form-control" id="zip-code" />
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label for="country">Country</label>
            <input type="text" class="form-control" id="country" />
          </div>
          <div class="col-md-6 mb-3">
            <label for="phone">Phone Number</label>
            <input type="text" class="form-control" id="phone" />
          </div>
        </div>
        <hr />
        <div class="form-row">
          <div class="col-md-4 mb-3">
            <label for="datetime">Datetime</label>
            <input type="text" class="form-control" id="datetime" value="" />
          </div>
          <div class="col-md-4 mb-3">
            <label for="car-make">Car manufacturer</label>
            <input type="text" class="form-control" id="car-make" value="" />
          </div>
          <div class="col-md-4 mb-3">
            <label for="car-model">Car model</label>
            <input type="text" class="form-control" id="car-model" value="" />
          </div>
        </div>
        <div class="form-group">
          <label for="accident-details">Accident details</label>
          <textarea
            class="form-control"
            id="accident-details"
            rows="3"
            value="hey there"
          ></textarea>
        </div>
        <button class="btn btn-primary" type="submit">Submit form</button>
        <div class="speech_output center"></div>
        <div class="center">
          <div class="fa fa-microphone" onclick="toggleSpeech()"></div>
        </div>
      </form>
    </div>
    

    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript">
      var AvaamoChatBot = function (t) {
        function o(t, o) {
          var n = document.createElement("script");
          n.setAttribute("src", t),
            (n.onload = o),
            document.body.appendChild(n);
        }
        return (
          (this.options = t || {}),
          (this.load = function (t) {
            o(this.options.url, function () {
              window.Avaamo.addFrame(),
                t && "function" == typeof t && t(window.Avaamo);
            });
          }),
          this
        );
      };
      var chatBox = new AvaamoChatBot({
        url:
          "https://c7.avaamo.com/web_channels/006b759f-583d-477e-ae54-5544d78e6f29?theme=avm-messenger",
      });
      chatBox.load(function (avaamo) {
        window.Avaamo.openChatBox();
        initMessageHandler();
        window.document.getElementsByClassName(
          "avaamo__chat__widget"
        )[0].style.display = "none";
      });
    </script>

    <iframe id="CustomWebView" frameborder="0"></iframe>
    <script src="./message_handler.js"></script>
    <script src="./speech.js"></script>
  </body>
</html>
